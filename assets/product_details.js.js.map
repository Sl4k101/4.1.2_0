{"version":3,"file":"product_details.js.js","sources":["../../src/plugins/captaina/crawlers/product_details.js"],"sourcesContent":["/*\n *    Copyright 2022 Umut TAN | umuttan@outlook.com\n *\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\n *    you may not use this file except in compliance with the License.\n *    You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *    Unless required by applicable law or agreed to in writing, software\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *    See the License for the specific language governing permissions and\n *    limitations under the License.\n *    this page updated on 21.12.2022\n */\n\nimport {VariableDefine} from \"../variable_define.ts\";\nimport {Helpers} from \"../../../classes/Helpers\";\nimport Browser from \"webextension-polyfill\";\n\nexport class _CrawlersProductDetails {\n    market_place_id = null;\n    market_host = null;\n    market_country_code = null;\n    amazon_page = false;\n    market_detail = null;\n    _conf = {}\n    _schema = {\n        'asin': '',\n        'is_sponsored': '',\n        'price': 0,\n        'offers': {},\n        'sellers': 0,\n        'bestsellers': {main: {'url': '', 'rank': 0, 'prefix': ''}, child: []},\n        'group_bestsellers': {'url': '', 'rank': 0, 'prefix': ''},\n    };\n    siteLang = null;\n    hostname = null;\n    data = {'asins': {}, market_place_id: null, market_host: null};\n    data_html = {};\n    amazon_data = {};\n    bestseller_groups = {};\n    regex = {\n        'float': /[-+]?([0-9]*\\.[0-9]+|[0-9]+)/,\n        'int': /[0-9]+$/,\n        'dimension': /^([\\d.]+)\\s*x\\s*([\\d.]+)\\s*x\\s*([\\d.]+)\\s*(\\w+(?:\\s+\\w+)*)(?:;\\s*([\\d.]+)\\s*(\\w+))?$/,\n        'weight': /^([\\d.]+)\\s*(\\w+)$/\n    }\n\n\n    constructor() {\n        let _host = window.location.host.replace('www.', \"\");\n        if (window.location.host.indexOf(\"www.amazon.\") === -1) {\n            this.amazon_page = false;\n            return;\n        } else {\n            this.amazon_page = true;\n        }\n        this.market_place_id = VariableDefine.market_urls[_host] ?? null\n        this.market_host = window.location.hostname.replace('www.', \"\")\n        this.data.market_place_id = this.market_place_id;\n        this.data.market_host = this.market_host;\n        if (typeof VariableDefine.market_host_by_details != 'undefined' && this.market_host) {\n            this.market_country_code = VariableDefine.market_host_by_details[this.market_host]?.country_code?.toUpperCase();\n            this.market_detail = VariableDefine.market_host_by_details[this.market_host];\n        }\n        this.bestseller_groups = JSON.parse(sessionStorage.getItem('bestseller_groups'));\n        if (!this.bestseller_groups) {\n            this.bestseller_groups = {};\n            this.getBestsellerGroups();\n        }\n        Browser.storage.local.get('settings').then(response => {\n            this._conf = response['settings'];\n            //this.scan();\n        });\n    }\n\n    scan() {\n        return new Promise(resolve => {\n            if (this.amazon_page == false) resolve(null);\n            document?.querySelectorAll(\"[name='ASIN']\").forEach(item => {\n                let asin = item.getAttribute('value');\n                if (asin.length > 0 && typeof this.data.asins[asin] == 'undefined') {\n                    this.build(asin);\n                }\n            });\n            let start = 0;\n            if (Object.keys(this.data.asins).length == 0 && document?.querySelectorAll(\"[name='ASIN']\").length == 0) {\n                document?.querySelectorAll(\"[data-asin]\").forEach(item => {\n                    //if (start == 0) {\n                    let asin = item.getAttribute('data-asin');\n                    if (asin.length > 0 && typeof this.data.asins[asin] == 'undefined') {\n                        this.build(asin);\n                    }\n                    //}\n                });\n            }\n            resolve(this.data.asins);\n        });\n    }\n\n    async build(asin) {\n        return await new Promise(resolve => {\n            let _session_key = this.market_host + '_' + asin + '_product_detail';\n            let session_data = null;//JSON.parse(sessionStorage.getItem(this.market_host + '_' + asin + \"_product_detail\"));\n            if (session_data) {\n                this.data.asins[asin] = session_data;\n            } else {\n                this.data.asins[asin] = {\n                    'asin': asin,\n                    'is_sponsored': false,\n                    'amazon': this.amazon_data[asin],\n                };\n                return fetch(window.location.origin + '/dp/' + asin).then(response => response.text()).then(html => {\n                    this.data_html[asin] = html;\n                    this.get(this.data.asins[asin], html).then(result => {\n                        sessionStorage.setItem(_session_key, JSON.stringify(result));\n                        resolve(result);\n                    });\n                });\n                //this.getAmazon(asin).then();\n            }\n            resolve(this.data.asins[asin]);\n        });\n    }\n\n    getAmazon(asin) {\n        if (typeof this.amazon_data[asin] != 'undefined') {\n            return new Promise(resolve => resolve);\n        }\n        let _data = {\n            'url': 'https://sellercentral.' + this.market_host + '/rcpublic/searchproduct?countryCode=' + this.market_country_code + '&locale=en-US',\n            'data': {\"keywords\": asin, \"countryCode\": this.market_country_code, \"searchType\": \"GENERAL\", \"pageOffset\": 1},\n            'method': 'POST',\n        }\n        return fetch(VariableDefine.api_url + \"/tunnel\", {\n            \"headers\": {\n                \"accept\": \"application/json\",\n                \"content-type\": \"application/json; charset=UTF-8\",\n            },\n            \"body\": JSON.stringify(_data),\n            \"method\": \"POST\",\n        }).then(response => response.json()).then(response => {\n            if (response?.succeed) {\n                response.data.products.forEach(item => {\n                    _data = {\n                        'url': 'https://sellercentral.' + this.market_host + '/rcpublic/getfees?countryCode=' + this.market_country_code + '&locale=en-US',\n                        'data': {\n                            \"countryCode\": this.market_country_code,\n                            \"itemInfo\": {\n                                \"asin\": item.asin,\n                                \"glProductGroupName\": item.gl,\n                                \"packageLength\": item[\"length\"],\n                                \"packageWidth\": item.width,\n                                \"packageHeight\": item.height,\n                                \"dimensionUnit\": item.dimensionUnit,\n                                \"packageWeight\": item.weight,\n                                \"weightUnit\": item.weightUnit,\n                                \"afnPriceStr\": item.price,\n                                \"mfnPriceStr\": item.price,\n                                \"mfnShippingPriceStr\": \"0\",\n                                \"currency\": this.market_detail.currency,\n                                \"isNewDefined\": false\n                            },\n                            \"programIdList\": [\"Core\", \"MFN\"]\n                        },\n                        'method': 'POST',\n                    };\n\n                    return fetch(VariableDefine.api_url + \"/tunnel\", {\n                        \"headers\": {\n                            \"accept\": \"application/json\",\n                            \"content-type\": \"application/json; charset=UTF-8\",\n                        },\n                        \"body\": JSON.stringify(_data),\n                        \"method\": \"POST\",\n                    }).then(response => response.json()).then(response => {\n                        if (response?.succeed) {\n                            item.raw_fees = response?.data?.programFeeResultMap?.Core?.otherFeeInfoMap;\n                            let _total = item.raw_fees.ReferralFee.total.amount + item.raw_fees.FulfillmentFee.total.amount + item.raw_fees.VariableClosingFee.total.amount + item.raw_fees.FixedClosingFee.total.amount;\n                            item.fees = {\n                                referral_fees: item.raw_fees.ReferralFee.total.amount,\n                                fba_fees: item.raw_fees.FulfillmentFee.total.amount,\n                                variable_closing_fee: item.raw_fees.VariableClosingFee.total.amount,\n                                fixed_closing_fee: item.raw_fees.FixedClosingFee.total.amount,\n                                total_fba_fees: _total,\n                            };\n                            this.amazon_data[item.asin] = item;\n                            this.data[item.asin] = item;\n                        }\n                    }).finally(() => {\n                        this.amazon_data[item.asin] = item;\n                    });\n                });\n            }\n        });\n    }\n\n    /**\n     * @param {object} data - Data\n     * @param {Document|DOMParser|string} html - The html\n     */\n    get(data, html) {\n        return new Promise((resolve => {\n            if (typeof html == 'undefined') return data;\n            if (typeof html.querySelectorAll == 'undefined') {\n                let dom = new DOMParser();\n                html = dom.parseFromString(html, 'text/html');\n            }\n            this.data.asins[data.asin]['is_apparel'] = html.querySelector(\".apparel\") != null;\n            this.data.asins[data.asin]['bestsellers'] = this.getBestsellers(data, html);\n            this.data.asins[data.asin]['group_bestsellers'] = data.bestsellers?.main ?? {};\n            return this.getPrice(data, html).then(() => {\n                this.getRatings(data, html);\n                this.getCategories(data, html);\n                this.getDetails(data, html);\n                this.getDelivery(data, html);\n                this.getBrand(data, html);\n                this.getImage(data, html);\n                resolve(this.data.asins[data.asin]);\n            });\n        }))\n    };\n\n    getBestsellers(data, html) {\n        if (!html) return data;\n        // Bestseller yakalamaca\n        this._schema.bestsellers.main = {};\n        this._schema.bestsellers.child = [];\n        let main_bestseller = /bestsellers\\/(.*?)\\/ref=/g;\n        let child_bestseller = /bestsellers\\/(.*?[0-9])\\/ref=/g;\n        html.querySelectorAll('.prodDetTable a[href*=\"/bestsellers/\"],#detailBulletsWrapper_feature_div a[href*=\"/bestsellers/\"]').forEach((item, __key) => {\n            let _main = [...item.getAttribute('href').matchAll(main_bestseller)];\n            let _child = [...item.getAttribute('href').matchAll(child_bestseller)];\n            if (_child.length > 0) {\n                _child.forEach((child_bsr, index) => {\n                    this._schema.bestsellers.child.push({\n                        'url': 'https://' + this.market_host + item.getAttribute('href'),\n                        'parent_prefix': child_bsr[1].split('/')[0],\n                        'title': item.innerText.trim(),\n                        'prefix': child_bsr[1].split('/')[1],\n                        'rank': item.closest('span')?.innerText.replace(',', '').replace('.', '').match(this.regex.float)[0]\n                    });\n                })\n            } else if (_main.length > 0) {\n                _main.forEach(main_bsr => {\n                    let title = main_bsr[1];\n                    if (typeof this.bestseller_groups[title] != 'undefined') title = this.bestseller_groups[title];\n                    this._schema.bestsellers.main = {\n                        'url': 'https://' + this.market_host + item.getAttribute('href'),\n                        'prefix': main_bsr[1],\n                        'title': title,\n                        'rank': item.closest('span')?.innerText.replace(',', '').replace('.', '').match(this.regex.float)[0]\n                    }\n                });\n                data.bestsellers = this._schema.bestsellers;\n            }\n\n        })\n        return data.bestsellers;\n    }\n\n    getRatings(data, html) {\n        let rating_container = html.querySelector(\"#averageCustomerReviews[data-asin='\" + data.asin + \"']\");\n        this.data.asins[data.asin]['rating'] = this.data.asins[data.asin]['rating_count'] = 0;\n\n        if (rating_container) {\n            this.data.asins[data.asin]['rating_count'] = rating_container.querySelector(\"#acrCustomerReviewText\").innerText.match(this.regex.float)[0];\n            this.data.asins[data.asin]['rating'] = rating_container.querySelector(\"#acrPopover a span\").innerText.match(this.regex.float)[0];\n        }\n    }\n\n    getCategories(data, html) {\n        let categories_container = html.querySelector(\"#showing-breadcrumbs_div ul\");\n        this.data.asins[data.asin]['categories'] = {};\n        this.data.asins[data.asin]['main_category'] = {};\n        this.data.asins[data.asin]['main_category_id'] = {};\n        this.data.asins[data.asin]['group'] = {};\n        let bsr_group = Helpers.NodeSearch(html.querySelectorAll(\"#nav-subnav a\"), 'Best Sellers')[0] ?? null;\n        if (bsr_group) {\n            this.data.asins[data.asin]['group'] = bsr_group.getAttribute('href').match(/bestsellers\\/(.*?)\\//)[1];\n        }\n\n        if (categories_container) {\n            categories_container.querySelectorAll(\"li a\").forEach((item, index) => {\n                let category_href = item.getAttribute(\"href\").match(/node=([0-9]+$)/);\n                if (category_href) {\n                    let _id = (category_href ?? '')[0].match(this.regex.int);\n                    this.data.asins[data.asin]['categories'][index] = {'name': item.innerText.trim(), 'id': _id[0] ?? null};\n                    if (index == 0) {\n                        this.data.asins[data.asin]['main_category'] = item.innerText.trim();\n                        this.data.asins[data.asin]['main_category_id'] = _id[0] ?? null;\n                    }\n                }\n            });\n        }\n    }\n\n    getDetails(data, html) {\n        let container = html.querySelectorAll(\".prodDetAttrValue,#detailBullets_feature_div ul li > span > span:last-child\");\n        let dimension = null;\n        let last_dimension = null;\n        let dimensions = {\n            '_length': 0,\n            'width': 0,\n            'height': 0,\n            'unit': null,\n            'weight': 0,\n            'weight_units': null,\n        };\n        this.data.asins[data.asin]['dimension_match'] = null;\n        container.forEach(item => {\n            let _data = item?.innerText?.replace(\"‎\", \"\")?.trim();\n            let date_first_available = Date.parse(_data);\n            if (date_first_available) {\n                this.data.asins[data.asin]['date_first_available_timestamp'] = date_first_available;\n                this.data.asins[data.asin]['date_first_available'] = new Date(date_first_available).toLocaleDateString();\n            }\n            let _dimension = item?.innerText?.replace(\"‎\", \"\").replace(/\\,/g, \".\")?.trim();\n            let _dimension_try = null;\n            if (_dimension) _dimension_try = last_dimension;\n            if (last_dimension && (_dimension_try + '; ' + _dimension)?.match(this.regex.dimension)) {\n                dimension = (_dimension_try + '; ' + _dimension)?.match(this.regex.dimension);\n            } else if (last_dimension && (_dimension + '; ' + _dimension_try)?.match(this.regex.dimension)) {\n                dimension = (_dimension + '; ' + _dimension_try)?.match(this.regex.dimension);\n            } else if (_dimension?.match(this.regex.dimension)) {\n                dimension = _dimension?.match(this.regex.dimension);\n            } else {\n                if (_dimension.split('x').length > 2) {\n                    console.log(_dimension.split('x'));\n                }\n            }\n            if (dimension) {\n                dimensions._length = parseFloat(dimension[1]);\n                dimensions.width = parseFloat(dimension[2]);\n                dimensions.height = parseFloat(dimension[3]);\n                dimensions.unit = dimension[4];\n\n                if (dimension[5] && dimension[6]) {\n                    dimensions.weight = dimension[5] && parseFloat(dimension[5]);\n                    dimensions.weight_units = dimension[6];\n                }\n                this.data.asins[data.asin]['dimension_match'] = dimension;\n            }\n            last_dimension = _dimension;\n        });\n        this.data.asins[data.asin]['dimensions'] = dimensions;\n    }\n\n    getDelivery(data, html) {\n        this.data.asins[data.asin]['delivery_time'] = null;\n        this.data.asins[data.asin]['delivery_date'] = null;\n        let str = html.querySelector(\"[data-csa-c-delivery-time]\")?.getAttribute(\"data-csa-c-delivery-time\");\n        if (!str) return;\n        if (str.indexOf(\" - \") !== -1) {\n            str = str.split(' - ')[1];\n        }\n        if (str.indexOf(\", \") !== -1) {\n            str = str.split(', ')[1];\n        }\n        if (str.indexOf('202') == -1) {\n            str += \" \" + new Date().getFullYear();\n        }\n        let delivery_time = Date.parse(str);\n        if (delivery_time > 0) {\n            let delivery_date = new Date(delivery_time);\n            this.data.asins[data.asin]['delivery_time'] = delivery_time;\n            this.data.asins[data.asin]['delivery_date'] = delivery_date.toLocaleDateString();\n        }\n    }\n\n    getBrand(data, html) {\n        //po-brand td:last-child\n        this.data.asins[data.asin]['brand'] = html.querySelector(\".po-brand td:last-child span\")?.innerText\n    }\n\n    getImage(data, html) {\n        //po-brand td:last-child\n        this.data.asins[data.asin]['thumbnail'] = html.querySelector(\".imageThumbnail img\")?.getAttribute('src');\n        this.data.asins[data.asin]['image'] = html.querySelector(\"#imgTagWrapperId [data-old-hires]\")?.getAttribute('data-old-hires');\n        if (typeof this.data.asins[data.asin]['thumbnail'] == 'undefined') {\n            this.data.asins[data.asin]['thumbnail'] = this.data.asins[data.asin]['image']?.replace('_SL1000_', '_US40_')\n        }\n    }\n\n    getPrice(data, main_html) {\n        let price = 0;\n        return fetch(window.location.origin + '/gp/product/ajax/?asin=' + data.asin + '&experienceId=aodAjaxMain').then(response => response.text()).then(response => {\n            let dom = new DOMParser();\n            let html = dom.parseFromString(response, 'text/html');\n            let _main = html.querySelector(\".aod-sticky-pinned-offer\") ?? undefined;\n            if (typeof _main == 'undefined') _main = html.querySelectorAll('#aod-offer-soldBy')[0];\n            if (typeof (_main?.querySelectorAll(\".a-offscreen\")[0] ?? undefined) == 'undefined') _main = html.querySelectorAll('#aod-offer-soldBy')[0]?.closest(\"#aod-offer\");\n            let build_price = _main?.querySelectorAll(\".a-offscreen\")[0].innerText;\n            if (typeof build_price == 'undefined') return 0;\n            let precision = build_price.match(/[.,]/g);\n            let _main_build = 0;\n            if (precision.length >= 2) {\n                let reg = new RegExp(\"\\\\\" + precision[0], \"g\");\n                _main_build = build_price.replace(reg, \"\").replace(precision[(precision.length - 1)], '.');\n            } else if (precision.length === 1) {\n                _main_build = build_price.replace(precision[(precision.length - 1)], '.');\n            }\n            let _price = _main_build.match(this.regex.float)[0] ?? 0;\n            let _seller = _main.querySelector(\"#aod-offer-soldBy *[aria-label]\") ?? null;\n            this.data.asins[data.asin]['offers'] = {};//.aod-sticky-pinned-offer\n            let _ss = _main.querySelector(\"[data-csa-c-delivery-price]\")?.getAttribute(\"data-csa-c-delivery-price\")?.match(this.regex.float) ?? 0;\n            let shp_price = (typeof _ss[0] != 'undefined') ? _ss[0] : 0;\n\n            let seller_link = null;\n            if (typeof _seller.getAttribute('href') != 'undefined') {\n                if (_seller.getAttribute('href')?.indexOf('seller=') != -1) {\n                    seller_link = 'https://' + this.market_host + _seller.getAttribute('href');\n                }\n            }\n            let shipping_by = _main.querySelector(\"#aod-offer-shipsFrom\").innerHTML.trim();\n            let s_id = _seller.getAttribute('href')?.match(/seller=(.*?)&/);\n            if (s_id == null) {\n                s_id = _seller.getAttribute('href')?.match(/seller=(.*?)/);\n            }\n            this.data.asins[data.asin]['offers'][1] = {\n                'seller_id': (s_id != null) ? s_id[1].trim() : s_id,\n                'seller_name': _seller.innerText.trim(),\n                'seller_link': seller_link,\n                'price': _price,\n                'shipping_price': shp_price ?? 0,\n                'type': _main.querySelector(\"#aod-offer-heading *\").innerHTML.trim().split(\" \")[0],\n                'vendor': (shipping_by.indexOf('amazon.') != -1 || shipping_by.indexOf('Amazon') != -1) ? 'FBA' : 'FBM',\n            }\n            this.data.asins[data.asin]['seller_name'] = this.data.asins[data.asin]['offers'][1]['seller_name'];\n            this.data.asins[data.asin]['seller_id'] = this.data.asins[data.asin]['offers'][1]['seller_id'];\n            this.data.asins[data.asin]['shipping_price'] = this.data.asins[data.asin]['offers'][1]['shipping_price'] ?? 0;\n            this.data.asins[data.asin]['vendor'] = this.data.asins[data.asin]['offers'][1]['vendor'] ?? 0;\n\n            html.querySelectorAll('#aod-offer-soldBy').forEach((item, index) => {\n                item.querySelectorAll('[aria-label]').forEach(_seller => {\n                    //this.data.asins[data.asin]['offers']\n                    if (typeof _seller?.closest(\"#aod-offer\") != 'undefined' && _seller?.closest(\"#aod-offer\") != null) {\n                        let build_price = _seller?.closest(\"#aod-offer\").querySelector(\".a-offscreen\").innerText;\n\n                        let precision = build_price.match(/[.,]/g);\n                        let _main_build = 0;\n                        if (precision.length >= 2) {\n                            let reg = new RegExp(\"\\\\\" + precision[0], \"g\");\n                            _main_build = build_price.replace(reg, \"\").replace(precision[(precision.length - 1)], '.');\n                        } else if (precision.length === 1) {\n                            _main_build = build_price.replace(precision.pop(), '.');\n                        }\n\n                        let _price = _main_build.match(this.regex.float)[0];\n                        if (typeof _price != 'undefined' && _main.querySelector(\"[data-csa-c-delivery-price]\")) {\n                            let shp = _main.querySelector(\"[data-csa-c-delivery-price]\").getAttribute('data-csa-c-delivery-price') ? 0 : _main.querySelector(\"[data-csa-c-delivery-price]\").getAttribute(\"data-csa-c-delivery-price\").match(this.regex.float);\n                            let s_id = _seller.getAttribute('href')?.match(/seller=(.*?)&/);\n                            if (s_id == null) {\n                                s_id = _seller.getAttribute('href')?.match(/seller=(.*?)/);\n                            }\n                            let seller_link = null;\n                            if (typeof _seller.getAttribute('href') != 'undefined') {\n                                if (_seller.getAttribute('href')?.indexOf('seller=') != -1) {\n                                    seller_link = 'https://' + this.market_host + _seller.getAttribute('href');\n                                }\n                            }\n                            let shipping_by = _seller?.closest(\"#aod-offer\").querySelector(\"#aod-offer-shipsFrom\").innerHTML.trim();\n                            this.data.asins[data.asin]['offers'][index] = {\n                                'seller_id': (s_id != null) ? s_id[1].trim() : s_id,\n                                'seller_name': _seller.innerText.trim(),\n                                'seller_link': seller_link,\n                                'price': _price,\n                                'shipping_price': shp?.innerText?.match(this.regex.float)[0] ?? 0,\n                                'type': _seller?.closest(\"#aod-offer\")?.querySelector(\"#aod-offer-heading h5\")?.innerHTML?.trim().split(\" \")[0],\n                                'vendor': (shipping_by.indexOf('amazon.') != -1 || shipping_by.indexOf('Amazon') != -1) ? 'FBA' : 'FBM',\n                            };\n                        }\n                    }\n\n                })\n                //console.log(item);\n                //this.data.asins[data.asin]['offers'][]\n            });\n            if (this.data.asins[data.asin]['offers']) {\n                let offer_count = main_html.querySelector(\"#olpLinkWidget_feature_div a[href*='offer-listing'] .olp-text-box\")?.innerHTML.trim().match(/[0-9]+/)[0] ?? null;\n                if (offer_count > 0) {\n                    this.data.asins[data.asin]['offer_count'] = offer_count;\n                } else {\n                    this.data.asins[data.asin]['offer_count'] = Object.keys(this.data.asins[data.asin]['offers']).length;\n                }\n            }\n            price = _price;\n            this.data.asins[data.asin]['price'] = price;\n            return price;\n        })\n        return price;\n    }\n\n    getBestsellerGroups() {\n        fetch(window.location.origin + '/gp/bestsellers/').then(response => response.text()).then(response => {\n            let dom = new DOMParser();\n            let html = dom.parseFromString(response, 'text/html');\n            let _main = html.querySelectorAll(\"[role='group'] [role='treeitem'] a\") ?? undefined;\n            let main_bestseller = /bestsellers\\/(.*?)\\/ref=/g;\n            let child_bestseller = /bestsellers\\/(.*?[0-9])\\/ref=/g;\n            _main.forEach(item => {\n                let bestseller = [...item.getAttribute('href').matchAll(main_bestseller)][0] ?? [];\n                if (typeof bestseller[1] != 'undefined') this.bestseller_groups[bestseller[1]] = item.innerText.trim();\n            });\n            if (this.bestseller_groups) sessionStorage.setItem('bestseller_groups', JSON.stringify(this.bestseller_groups))\n        });\n    }\n}\n\nexport const CrawlersProductDetails = new _CrawlersProductDetails();\nCrawlersProductDetails.scan().then(() => {\n    //if (constants.debugMode) console.log(CrawlersProductDetails, \"CrawlersProductDetails\");\n});\n//CrawlersProductDetails?.scan().then(console.log(CrawlersProductDetails.data));"],"names":["_CrawlersProductDetails","_host","VariableDefine","Browser","response","resolve","item","asin","_session_key","html","result","_data","_total","data","main_bestseller","child_bestseller","__key","_main","_child","child_bsr","index","main_bsr","title","rating_container","categories_container","bsr_group","Helpers","category_href","_id","container","dimension","last_dimension","dimensions","date_first_available","_dimension","_dimension_try","str","delivery_time","delivery_date","main_html","price","build_price","precision","_main_build","reg","_price","_seller","_ss","shp_price","seller_link","shipping_by","s_id","shp","offer_count","bestseller","CrawlersProductDetails"],"mappings":"+CAqBO,MAAMA,CAAwB,CACjC,gBAAkB,KAClB,YAAc,KACd,oBAAsB,KACtB,YAAc,GACd,cAAgB,KAChB,MAAQ,CAAE,EACV,QAAU,CACN,KAAQ,GACR,aAAgB,GAChB,MAAS,EACT,OAAU,CAAE,EACZ,QAAW,EACX,YAAe,CAAC,KAAM,CAAC,IAAO,GAAI,KAAQ,EAAG,OAAU,EAAE,EAAG,MAAO,CAAA,CAAE,EACrE,kBAAqB,CAAC,IAAO,GAAI,KAAQ,EAAG,OAAU,EAAE,CAChE,EACI,SAAW,KACX,SAAW,KACX,KAAO,CAAC,MAAS,CAAE,EAAE,gBAAiB,KAAM,YAAa,IAAI,EAC7D,UAAY,CAAA,EACZ,YAAc,CAAA,EACd,kBAAoB,CAAA,EACpB,MAAQ,CACJ,MAAS,+BACT,IAAO,UACP,UAAa,uFACb,OAAU,oBACb,EAGD,aAAc,CACV,IAAIC,EAAQ,OAAO,SAAS,KAAK,QAAQ,OAAQ,EAAE,EACnD,GAAI,OAAO,SAAS,KAAK,QAAQ,aAAa,IAAM,GAAI,CACpD,KAAK,YAAc,GACnB,MACZ,MACY,KAAK,YAAc,GAEvB,KAAK,gBAAkBC,EAAe,YAAYD,CAAK,GAAK,KAC5D,KAAK,YAAc,OAAO,SAAS,SAAS,QAAQ,OAAQ,EAAE,EAC9D,KAAK,KAAK,gBAAkB,KAAK,gBACjC,KAAK,KAAK,YAAc,KAAK,YACzB,OAAOC,EAAe,uBAA0B,KAAe,KAAK,cACpE,KAAK,oBAAsBA,EAAe,uBAAuB,KAAK,WAAW,GAAG,cAAc,cAClG,KAAK,cAAgBA,EAAe,uBAAuB,KAAK,WAAW,GAE/E,KAAK,kBAAoB,KAAK,MAAM,eAAe,QAAQ,mBAAmB,CAAC,EAC1E,KAAK,oBACN,KAAK,kBAAoB,GACzB,KAAK,oBAAmB,GAE5BC,EAAQ,QAAQ,MAAM,IAAI,UAAU,EAAE,KAAKC,GAAY,CACnD,KAAK,MAAQA,EAAS,QAElC,CAAS,CACJ,CAED,MAAO,CACH,OAAO,IAAI,QAAQC,GAAW,CACtB,KAAK,aAAe,IAAOA,EAAQ,IAAI,EAC3C,UAAU,iBAAiB,eAAe,EAAE,QAAQC,GAAQ,CACxD,IAAIC,EAAOD,EAAK,aAAa,OAAO,EAChCC,EAAK,OAAS,GAAK,OAAO,KAAK,KAAK,MAAMA,CAAI,EAAK,KACnD,KAAK,MAAMA,CAAI,CAEnC,CAAa,EAEG,OAAO,KAAK,KAAK,KAAK,KAAK,EAAE,QAAU,GAAK,UAAU,iBAAiB,eAAe,EAAE,QAAU,GAClG,UAAU,iBAAiB,aAAa,EAAE,QAAQD,GAAQ,CAEtD,IAAIC,EAAOD,EAAK,aAAa,WAAW,EACpCC,EAAK,OAAS,GAAK,OAAO,KAAK,KAAK,MAAMA,CAAI,EAAK,KACnD,KAAK,MAAMA,CAAI,CAGvC,CAAiB,EAELF,EAAQ,KAAK,KAAK,KAAK,CACnC,CAAS,CACJ,CAED,MAAM,MAAME,EAAM,CACd,OAAO,MAAM,IAAI,QAAQF,GAAW,CAChC,IAAIG,EAAe,KAAK,YAAc,IAAMD,EAAO,kBAK/C,YAAK,KAAK,MAAMA,CAAI,EAAI,CACpB,KAAQA,EACR,aAAgB,GAChB,OAAU,KAAK,YAAYA,CAAI,CACnD,EACuB,MAAM,OAAO,SAAS,OAAS,OAASA,CAAI,EAAE,KAAKH,GAAYA,EAAS,KAAM,CAAA,EAAE,KAAKK,GAAQ,CAChG,KAAK,UAAUF,CAAI,EAAIE,EACvB,KAAK,IAAI,KAAK,KAAK,MAAMF,CAAI,EAAGE,CAAI,EAAE,KAAKC,GAAU,CACjD,eAAe,QAAQF,EAAc,KAAK,UAAUE,CAAM,CAAC,EAC3DL,EAAQK,CAAM,CACtC,CAAqB,CACrB,CAAiB,CAIjB,CAAS,CACJ,CAED,UAAUH,EAAM,CACZ,GAAI,OAAO,KAAK,YAAYA,CAAI,EAAK,IACjC,OAAO,IAAI,QAAQF,GAAWA,CAAO,EAEzC,IAAIM,EAAQ,CACR,IAAO,yBAA2B,KAAK,YAAc,uCAAyC,KAAK,oBAAsB,gBACzH,KAAQ,CAAC,SAAYJ,EAAM,YAAe,KAAK,oBAAqB,WAAc,UAAW,WAAc,CAAC,EAC5G,OAAU,MACb,EACD,OAAO,MAAML,EAAe,QAAU,UAAW,CAC7C,QAAW,CACP,OAAU,mBACV,eAAgB,iCACnB,EACD,KAAQ,KAAK,UAAUS,CAAK,EAC5B,OAAU,MACtB,CAAS,EAAE,KAAKP,GAAYA,EAAS,MAAM,EAAE,KAAKA,GAAY,CAC9CA,GAAU,SACVA,EAAS,KAAK,SAAS,QAAQE,IAC3BK,EAAQ,CACJ,IAAO,yBAA2B,KAAK,YAAc,iCAAmC,KAAK,oBAAsB,gBACnH,KAAQ,CACJ,YAAe,KAAK,oBACpB,SAAY,CACR,KAAQL,EAAK,KACb,mBAAsBA,EAAK,GAC3B,cAAiBA,EAAK,OACtB,aAAgBA,EAAK,MACrB,cAAiBA,EAAK,OACtB,cAAiBA,EAAK,cACtB,cAAiBA,EAAK,OACtB,WAAcA,EAAK,WACnB,YAAeA,EAAK,MACpB,YAAeA,EAAK,MACpB,oBAAuB,IACvB,SAAY,KAAK,cAAc,SAC/B,aAAgB,EACnB,EACD,cAAiB,CAAC,OAAQ,KAAK,CAClC,EACD,OAAU,MAClC,EAE2B,MAAMJ,EAAe,QAAU,UAAW,CAC7C,QAAW,CACP,OAAU,mBACV,eAAgB,iCACnB,EACD,KAAQ,KAAK,UAAUS,CAAK,EAC5B,OAAU,MAClC,CAAqB,EAAE,KAAKP,GAAYA,EAAS,MAAM,EAAE,KAAKA,GAAY,CAClD,GAAIA,GAAU,QAAS,CACnBE,EAAK,SAAWF,GAAU,MAAM,qBAAqB,MAAM,gBAC3D,IAAIQ,EAASN,EAAK,SAAS,YAAY,MAAM,OAASA,EAAK,SAAS,eAAe,MAAM,OAASA,EAAK,SAAS,mBAAmB,MAAM,OAASA,EAAK,SAAS,gBAAgB,MAAM,OACtLA,EAAK,KAAO,CACR,cAAeA,EAAK,SAAS,YAAY,MAAM,OAC/C,SAAUA,EAAK,SAAS,eAAe,MAAM,OAC7C,qBAAsBA,EAAK,SAAS,mBAAmB,MAAM,OAC7D,kBAAmBA,EAAK,SAAS,gBAAgB,MAAM,OACvD,eAAgBM,CAChD,EAC4B,KAAK,YAAYN,EAAK,IAAI,EAAIA,EAC9B,KAAK,KAAKA,EAAK,IAAI,EAAIA,CAC1B,CACzB,CAAqB,EAAE,QAAQ,IAAM,CACb,KAAK,YAAYA,EAAK,IAAI,EAAIA,CACtD,CAAqB,EACJ,CAEjB,CAAS,CACJ,CAMD,IAAIO,EAAMJ,EAAM,CACZ,OAAO,IAAI,QAASJ,GACZ,OAAOI,EAAQ,IAAoBI,GACnC,OAAOJ,EAAK,iBAAoB,MAEhCA,EADU,IAAI,YACH,gBAAgBA,EAAM,WAAW,GAEhD,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,WAAgBJ,EAAK,cAAc,UAAU,GAAK,KAC7E,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,YAAiB,KAAK,eAAeA,EAAMJ,CAAI,EAC1E,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,kBAAuBA,EAAK,aAAa,MAAQ,CAAA,EACrE,KAAK,SAASA,EAAMJ,CAAI,EAAE,KAAK,IAAM,CACxC,KAAK,WAAWI,EAAMJ,CAAI,EAC1B,KAAK,cAAcI,EAAMJ,CAAI,EAC7B,KAAK,WAAWI,EAAMJ,CAAI,EAC1B,KAAK,YAAYI,EAAMJ,CAAI,EAC3B,KAAK,SAASI,EAAMJ,CAAI,EACxB,KAAK,SAASI,EAAMJ,CAAI,EACxBJ,EAAQ,KAAK,KAAK,MAAMQ,EAAK,IAAI,CAAC,CAClD,CAAa,EACF,CACN,CAED,eAAeA,EAAMJ,EAAM,CACvB,GAAI,CAACA,EAAM,OAAOI,EAElB,KAAK,QAAQ,YAAY,KAAO,CAAA,EAChC,KAAK,QAAQ,YAAY,MAAQ,CAAA,EACjC,IAAIC,EAAkB,4BAClBC,EAAmB,iCACvB,OAAAN,EAAK,iBAAiB,mGAAmG,EAAE,QAAQ,CAACH,EAAMU,IAAU,CAChJ,IAAIC,EAAQ,CAAC,GAAGX,EAAK,aAAa,MAAM,EAAE,SAASQ,CAAe,CAAC,EAC/DI,EAAS,CAAC,GAAGZ,EAAK,aAAa,MAAM,EAAE,SAASS,CAAgB,CAAC,EACjEG,EAAO,OAAS,EAChBA,EAAO,QAAQ,CAACC,EAAWC,IAAU,CACjC,KAAK,QAAQ,YAAY,MAAM,KAAK,CAChC,IAAO,WAAa,KAAK,YAAcd,EAAK,aAAa,MAAM,EAC/D,cAAiBa,EAAU,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EAC1C,MAASb,EAAK,UAAU,KAAM,EAC9B,OAAUa,EAAU,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EACnC,KAAQb,EAAK,QAAQ,MAAM,GAAG,UAAU,QAAQ,IAAK,EAAE,EAAE,QAAQ,IAAK,EAAE,EAAE,MAAM,KAAK,MAAM,KAAK,EAAE,CAAC,CAC3H,CAAqB,CACrB,CAAiB,EACMW,EAAM,OAAS,IACtBA,EAAM,QAAQI,GAAY,CACtB,IAAIC,EAAQD,EAAS,CAAC,EAClB,OAAO,KAAK,kBAAkBC,CAAK,EAAK,MAAaA,EAAQ,KAAK,kBAAkBA,CAAK,GAC7F,KAAK,QAAQ,YAAY,KAAO,CAC5B,IAAO,WAAa,KAAK,YAAchB,EAAK,aAAa,MAAM,EAC/D,OAAUe,EAAS,CAAC,EACpB,MAASC,EACT,KAAQhB,EAAK,QAAQ,MAAM,GAAG,UAAU,QAAQ,IAAK,EAAE,EAAE,QAAQ,IAAK,EAAE,EAAE,MAAM,KAAK,MAAM,KAAK,EAAE,CAAC,CACtG,CACrB,CAAiB,EACDO,EAAK,YAAc,KAAK,QAAQ,YAGhD,CAAS,EACMA,EAAK,WACf,CAED,WAAWA,EAAMJ,EAAM,CACnB,IAAIc,EAAmBd,EAAK,cAAc,sCAAwCI,EAAK,KAAO,IAAI,EAClG,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,OAAY,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,aAAkB,EAEhFU,IACA,KAAK,KAAK,MAAMV,EAAK,IAAI,EAAE,aAAkBU,EAAiB,cAAc,wBAAwB,EAAE,UAAU,MAAM,KAAK,MAAM,KAAK,EAAE,CAAC,EACzI,KAAK,KAAK,MAAMV,EAAK,IAAI,EAAE,OAAYU,EAAiB,cAAc,oBAAoB,EAAE,UAAU,MAAM,KAAK,MAAM,KAAK,EAAE,CAAC,EAEtI,CAED,cAAcV,EAAMJ,EAAM,CACtB,IAAIe,EAAuBf,EAAK,cAAc,6BAA6B,EAC3E,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,WAAgB,GAC3C,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,cAAmB,GAC9C,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,iBAAsB,GACjD,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,MAAW,GACtC,IAAIY,EAAYC,EAAQ,WAAWjB,EAAK,iBAAiB,eAAe,EAAG,cAAc,EAAE,CAAC,GAAK,KAC7FgB,IACA,KAAK,KAAK,MAAMZ,EAAK,IAAI,EAAE,MAAWY,EAAU,aAAa,MAAM,EAAE,MAAM,sBAAsB,EAAE,CAAC,GAGpGD,GACAA,EAAqB,iBAAiB,MAAM,EAAE,QAAQ,CAAClB,EAAMc,IAAU,CACnE,IAAIO,EAAgBrB,EAAK,aAAa,MAAM,EAAE,MAAM,gBAAgB,EACpE,GAAIqB,EAAe,CACf,IAAIC,GAAOD,GAAiB,IAAI,CAAC,EAAE,MAAM,KAAK,MAAM,GAAG,EACvD,KAAK,KAAK,MAAMd,EAAK,IAAI,EAAE,WAAcO,CAAK,EAAI,CAAC,KAAQd,EAAK,UAAU,OAAQ,GAAMsB,EAAI,CAAC,GAAK,IAAI,EAClGR,GAAS,IACT,KAAK,KAAK,MAAMP,EAAK,IAAI,EAAE,cAAmBP,EAAK,UAAU,OAC7D,KAAK,KAAK,MAAMO,EAAK,IAAI,EAAE,iBAAsBe,EAAI,CAAC,GAAK,KAElE,CACjB,CAAa,CAER,CAED,WAAWf,EAAMJ,EAAM,CACnB,IAAIoB,EAAYpB,EAAK,iBAAiB,6EAA6E,EAC/GqB,EAAY,KACZC,EAAiB,KACjBC,EAAa,CACb,QAAW,EACX,MAAS,EACT,OAAU,EACV,KAAQ,KACR,OAAU,EACV,aAAgB,IAC5B,EACQ,KAAK,KAAK,MAAMnB,EAAK,IAAI,EAAE,gBAAqB,KAChDgB,EAAU,QAAQvB,GAAQ,CACtB,IAAIK,EAAQL,GAAM,WAAW,QAAQ,IAAK,EAAE,GAAG,OAC3C2B,EAAuB,KAAK,MAAMtB,CAAK,EACvCsB,IACA,KAAK,KAAK,MAAMpB,EAAK,IAAI,EAAE,+BAAoCoB,EAC/D,KAAK,KAAK,MAAMpB,EAAK,IAAI,EAAE,qBAA0B,IAAI,KAAKoB,CAAoB,EAAE,mBAAkB,GAE1G,IAAIC,EAAa5B,GAAM,WAAW,QAAQ,IAAK,EAAE,EAAE,QAAQ,MAAO,GAAG,GAAG,KAAI,EACxE6B,EAAiB,KACjBD,IAAYC,EAAiBJ,GAC7BA,IAAmBI,EAAiB,KAAOD,GAAa,MAAM,KAAK,MAAM,SAAS,EAClFJ,GAAaK,EAAiB,KAAOD,GAAa,MAAM,KAAK,MAAM,SAAS,EACrEH,IAAmBG,EAAa,KAAOC,GAAiB,MAAM,KAAK,MAAM,SAAS,EACzFL,GAAaI,EAAa,KAAOC,GAAiB,MAAM,KAAK,MAAM,SAAS,EACrED,GAAY,MAAM,KAAK,MAAM,SAAS,EAC7CJ,EAAYI,GAAY,MAAM,KAAK,MAAM,SAAS,EAE9CA,EAAW,MAAM,GAAG,EAAE,OAAS,GAC/B,QAAQ,IAAIA,EAAW,MAAM,GAAG,CAAC,EAGrCJ,IACAE,EAAW,QAAU,WAAWF,EAAU,CAAC,CAAC,EAC5CE,EAAW,MAAQ,WAAWF,EAAU,CAAC,CAAC,EAC1CE,EAAW,OAAS,WAAWF,EAAU,CAAC,CAAC,EAC3CE,EAAW,KAAOF,EAAU,CAAC,EAEzBA,EAAU,CAAC,GAAKA,EAAU,CAAC,IAC3BE,EAAW,OAASF,EAAU,CAAC,GAAK,WAAWA,EAAU,CAAC,CAAC,EAC3DE,EAAW,aAAeF,EAAU,CAAC,GAEzC,KAAK,KAAK,MAAMjB,EAAK,IAAI,EAAE,gBAAqBiB,GAEpDC,EAAiBG,CAC7B,CAAS,EACD,KAAK,KAAK,MAAMrB,EAAK,IAAI,EAAE,WAAgBmB,CAC9C,CAED,YAAYnB,EAAMJ,EAAM,CACpB,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,cAAmB,KAC9C,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,cAAmB,KAC9C,IAAIuB,EAAM3B,EAAK,cAAc,4BAA4B,GAAG,aAAa,0BAA0B,EACnG,GAAI,CAAC2B,EAAK,OACNA,EAAI,QAAQ,KAAK,IAAM,KACvBA,EAAMA,EAAI,MAAM,KAAK,EAAE,CAAC,GAExBA,EAAI,QAAQ,IAAI,IAAM,KACtBA,EAAMA,EAAI,MAAM,IAAI,EAAE,CAAC,GAEvBA,EAAI,QAAQ,KAAK,GAAK,KACtBA,GAAO,IAAM,IAAI,KAAM,EAAC,YAAW,GAEvC,IAAIC,EAAgB,KAAK,MAAMD,CAAG,EAClC,GAAIC,EAAgB,EAAG,CACnB,IAAIC,EAAgB,IAAI,KAAKD,CAAa,EAC1C,KAAK,KAAK,MAAMxB,EAAK,IAAI,EAAE,cAAmBwB,EAC9C,KAAK,KAAK,MAAMxB,EAAK,IAAI,EAAE,cAAmByB,EAAc,oBAC/D,CACJ,CAED,SAASzB,EAAMJ,EAAM,CAEjB,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,MAAWJ,EAAK,cAAc,8BAA8B,GAAG,SAC7F,CAED,SAASI,EAAMJ,EAAM,CAEjB,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,UAAeJ,EAAK,cAAc,qBAAqB,GAAG,aAAa,KAAK,EACvG,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,MAAWJ,EAAK,cAAc,mCAAmC,GAAG,aAAa,gBAAgB,EACxH,OAAO,KAAK,KAAK,MAAMI,EAAK,IAAI,EAAE,UAAgB,MAClD,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,UAAe,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,OAAU,QAAQ,WAAY,QAAQ,EAElH,CAED,SAASA,EAAM0B,EAAW,CACtB,IAAIC,EAAQ,EACZ,OAAO,MAAM,OAAO,SAAS,OAAS,0BAA4B3B,EAAK,KAAO,2BAA2B,EAAE,KAAKT,GAAYA,EAAS,KAAI,CAAE,EAAE,KAAKA,GAAY,CAE1J,IAAIK,EADM,IAAI,YACC,gBAAgBL,EAAU,WAAW,EAChDa,EAAQR,EAAK,cAAc,0BAA0B,GAAK,OAC1D,OAAOQ,EAAS,MAAaA,EAAQR,EAAK,iBAAiB,mBAAmB,EAAE,CAAC,GACjF,OAAQQ,GAAO,iBAAiB,cAAc,EAAE,CAAC,GAAK,QAAc,MAAaA,EAAQR,EAAK,iBAAiB,mBAAmB,EAAE,CAAC,GAAG,QAAQ,YAAY,GAChK,IAAIgC,EAAcxB,GAAO,iBAAiB,cAAc,EAAE,CAAC,EAAE,UAC7D,GAAI,OAAOwB,EAAe,IAAa,MAAO,GAC9C,IAAIC,EAAYD,EAAY,MAAM,OAAO,EACrCE,EAAc,EAClB,GAAID,EAAU,QAAU,EAAG,CACvB,IAAIE,EAAM,IAAI,OAAO,KAAOF,EAAU,CAAC,EAAG,GAAG,EAC7CC,EAAcF,EAAY,QAAQG,EAAK,EAAE,EAAE,QAAQF,EAAWA,EAAU,OAAS,CAAG,EAAE,GAAG,CACzG,MAAuBA,EAAU,SAAW,IAC5BC,EAAcF,EAAY,QAAQC,EAAWA,EAAU,OAAS,GAAK,GAAG,GAE5E,IAAIG,EAASF,EAAY,MAAM,KAAK,MAAM,KAAK,EAAE,CAAC,GAAK,EACnDG,EAAU7B,EAAM,cAAc,iCAAiC,GAAK,KACxE,KAAK,KAAK,MAAMJ,EAAK,IAAI,EAAE,OAAY,GACvC,IAAIkC,EAAM9B,EAAM,cAAc,6BAA6B,GAAG,aAAa,2BAA2B,GAAG,MAAM,KAAK,MAAM,KAAK,GAAK,EAChI+B,EAAa,OAAOD,EAAI,CAAC,EAAK,IAAeA,EAAI,CAAC,EAAI,EAEtDE,EAAc,KACd,OAAOH,EAAQ,aAAa,MAAM,EAAK,KACnCA,EAAQ,aAAa,MAAM,GAAG,QAAQ,SAAS,GAAK,KACpDG,EAAc,WAAa,KAAK,YAAcH,EAAQ,aAAa,MAAM,GAGjF,IAAII,EAAcjC,EAAM,cAAc,sBAAsB,EAAE,UAAU,OACpEkC,EAAOL,EAAQ,aAAa,MAAM,GAAG,MAAM,eAAe,EA+D9D,GA9DIK,GAAQ,OACRA,EAAOL,EAAQ,aAAa,MAAM,GAAG,MAAM,cAAc,GAE7D,KAAK,KAAK,MAAMjC,EAAK,IAAI,EAAE,OAAU,CAAC,EAAI,CACtC,UAAcsC,GAAQ,KAAQA,EAAK,CAAC,EAAE,KAAI,EAAKA,EAC/C,YAAeL,EAAQ,UAAU,KAAM,EACvC,YAAeG,EACf,MAASJ,EACT,eAAkBG,GAAa,EAC/B,KAAQ/B,EAAM,cAAc,sBAAsB,EAAE,UAAU,KAAI,EAAG,MAAM,GAAG,EAAE,CAAC,EACjF,OAAWiC,EAAY,QAAQ,SAAS,GAAK,IAAMA,EAAY,QAAQ,QAAQ,GAAK,GAAM,MAAQ,KACrG,EACD,KAAK,KAAK,MAAMrC,EAAK,IAAI,EAAE,YAAiB,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,OAAU,CAAC,EAAE,YACpF,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,UAAe,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,OAAU,CAAC,EAAE,UAClF,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,eAAoB,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,OAAU,CAAC,EAAE,gBAAqB,EAC5G,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,OAAY,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,OAAU,CAAC,EAAE,QAAa,EAE5FJ,EAAK,iBAAiB,mBAAmB,EAAE,QAAQ,CAACH,EAAMc,IAAU,CAChEd,EAAK,iBAAiB,cAAc,EAAE,QAAQwC,GAAW,CAErD,GAAI,OAAOA,GAAS,QAAQ,YAAY,EAAK,KAAeA,GAAS,QAAQ,YAAY,GAAK,KAAM,CAChG,IAAIL,EAAcK,GAAS,QAAQ,YAAY,EAAE,cAAc,cAAc,EAAE,UAE3EJ,EAAYD,EAAY,MAAM,OAAO,EACrCE,EAAc,EAClB,GAAID,EAAU,QAAU,EAAG,CACvB,IAAIE,EAAM,IAAI,OAAO,KAAOF,EAAU,CAAC,EAAG,GAAG,EAC7CC,EAAcF,EAAY,QAAQG,EAAK,EAAE,EAAE,QAAQF,EAAWA,EAAU,OAAS,CAAG,EAAE,GAAG,CACrH,MAAmCA,EAAU,SAAW,IAC5BC,EAAcF,EAAY,QAAQC,EAAU,IAAG,EAAI,GAAG,GAG1D,IAAIG,EAASF,EAAY,MAAM,KAAK,MAAM,KAAK,EAAE,CAAC,EAClD,GAAI,OAAOE,EAAU,KAAe5B,EAAM,cAAc,6BAA6B,EAAG,CACpF,IAAImC,EAAMnC,EAAM,cAAc,6BAA6B,EAAE,aAAa,2BAA2B,EAAI,EAAIA,EAAM,cAAc,6BAA6B,EAAE,aAAa,2BAA2B,EAAE,MAAM,KAAK,MAAM,KAAK,EAC5NkC,EAAOL,EAAQ,aAAa,MAAM,GAAG,MAAM,eAAe,EAC1DK,GAAQ,OACRA,EAAOL,EAAQ,aAAa,MAAM,GAAG,MAAM,cAAc,GAE7D,IAAIG,EAAc,KACd,OAAOH,EAAQ,aAAa,MAAM,EAAK,KACnCA,EAAQ,aAAa,MAAM,GAAG,QAAQ,SAAS,GAAK,KACpDG,EAAc,WAAa,KAAK,YAAcH,EAAQ,aAAa,MAAM,GAGjF,IAAII,EAAcJ,GAAS,QAAQ,YAAY,EAAE,cAAc,sBAAsB,EAAE,UAAU,OACjG,KAAK,KAAK,MAAMjC,EAAK,IAAI,EAAE,OAAUO,CAAK,EAAI,CAC1C,UAAc+B,GAAQ,KAAQA,EAAK,CAAC,EAAE,KAAI,EAAKA,EAC/C,YAAeL,EAAQ,UAAU,KAAM,EACvC,YAAeG,EACf,MAASJ,EACT,eAAkBO,GAAK,WAAW,MAAM,KAAK,MAAM,KAAK,EAAE,CAAC,GAAK,EAChE,KAAQN,GAAS,QAAQ,YAAY,GAAG,cAAc,uBAAuB,GAAG,WAAW,KAAM,EAAC,MAAM,GAAG,EAAE,CAAC,EAC9G,OAAWI,EAAY,QAAQ,SAAS,GAAK,IAAMA,EAAY,QAAQ,QAAQ,GAAK,GAAM,MAAQ,KAClI,CACyB,CACJ,CAErB,CAAiB,CAGjB,CAAa,EACG,KAAK,KAAK,MAAMrC,EAAK,IAAI,EAAE,OAAW,CACtC,IAAIwC,EAAcd,EAAU,cAAc,mEAAmE,GAAG,UAAU,KAAM,EAAC,MAAM,QAAQ,EAAE,CAAC,GAAK,KACnJc,EAAc,EACd,KAAK,KAAK,MAAMxC,EAAK,IAAI,EAAE,YAAiBwC,EAE5C,KAAK,KAAK,MAAMxC,EAAK,IAAI,EAAE,YAAiB,OAAO,KAAK,KAAK,KAAK,MAAMA,EAAK,IAAI,EAAE,MAAS,EAAE,MAErG,CACD,OAAA2B,EAAQK,EACR,KAAK,KAAK,MAAMhC,EAAK,IAAI,EAAE,MAAW2B,EAC/BA,CACnB,CAAS,CAEJ,CAED,qBAAsB,CAClB,MAAM,OAAO,SAAS,OAAS,kBAAkB,EAAE,KAAKpC,GAAYA,EAAS,KAAI,CAAE,EAAE,KAAKA,GAAY,CAGlG,IAAIa,EAFM,IAAI,YACC,gBAAgBb,EAAU,WAAW,EACnC,iBAAiB,oCAAoC,GAAK,OACvEU,EAAkB,4BAEtBG,EAAM,QAAQX,GAAQ,CAClB,IAAIgD,EAAa,CAAC,GAAGhD,EAAK,aAAa,MAAM,EAAE,SAASQ,CAAe,CAAC,EAAE,CAAC,GAAK,CAAA,EAC5E,OAAOwC,EAAW,CAAC,EAAK,MAAa,KAAK,kBAAkBA,EAAW,CAAC,CAAC,EAAIhD,EAAK,UAAU,KAAI,EACpH,CAAa,EACG,KAAK,mBAAmB,eAAe,QAAQ,oBAAqB,KAAK,UAAU,KAAK,iBAAiB,CAAC,CAC1H,CAAS,CACJ,CACL,CAEY,MAACiD,EAAyB,IAAIvD,EAC1CuD,EAAuB,KAAI,EAAG,KAAK,IAAM,CAEzC,CAAC"}